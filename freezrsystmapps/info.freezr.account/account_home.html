<!--
freezr Account Home
	app_list refers to app_list.html
	options:
	 'home': {
        page_title: "Accounts Home (Freezr)",
        css_files: ['info.freezr.public/freezr_style.css', 'account_home.css'],
        page_url: 'account_home.html',
        app_name: "info.freezr.account",
        script_files: ['/app_files/info.freezr.account/account_home.js']
    },

-->

<div class="freezr-page">
    <nav class="freezr-nav" id="adminFunctions">
        <span class="freezr-nav-title">freezr home</span>
        <a href="/public">Public Posts</a>
        <a id="publicEntry" href="/">Public Home</a>
        <a id="freezer_admin_butt" href="/admin/home">Admin</a>
        <a href="/account/settings">Account Settings</a>
        <a href="/account/contacts">Contacts</a>
        <a href="/account/logout">Log Out</a>
    </nav>

    <div class="freezr-content">
        <div id="welcomeMsg" style="display:none; color: var(--freezr-accent); text-align: center; font-size: 1.75rem; padding: 2rem 0;">
            Welcome to your freezr home page!
        </div>

        <div id="errorBox" class="errorBox"></div>

        <div class="freezr-card" id="app_list">
            <h2 style="margin-bottom: 1rem;">
                {{#user_apps.length }}You have {{ user_apps.length }} installed apps. 
                <span style="font-size: 13px; font-weight: normal; margin-left: 0.5rem;">
                    <a style="display: none;" href="#installDialogueBox">(Install new)</a>
                </span>
                {{/user_apps.length }}
                {{^user_apps}}You have not installed any apps yet.{{/user_apps}}
            </h2>
            
            <div class="fBoxGrid">
            {{#user_apps}}
            <div class="freezrBox" {{#offThreadWip}} style="border-color:palevioletred" {{/offThreadWip}}>
                <div class="fBoxImgOuter">
                <a class="fBoxA" href="{{#served_url}}{{served_url}}{{/served_url}}{{^served_url}}/apps/{{app_name}}{{/served_url}}">
                    <img src="{{logo}}" width="80px" class="fBoxImg" id="goto_2_{{app_name}}">
                </a>
                </div>

                <div class="fBoxText" id="goto_4_{{app_name}}">
                <a class="fBoxA" href="/apps/{{app_name}}">
                    {{app_display_name}}
                </a>
                </div>

                <a class="fBoxButt" data-appName="{{app_name}}" data-action="settings" id="settings_1_{{app_name}}" href="/account/app/settings/{{app_name}}">Settings</a>
            </div>
            {{/user_apps}}
            </div>
        </div>

        <div class="freezr-card" id="installDialogueBox">
            <h2 style="margin-bottom: 1rem;">Install New Apps</h2>
            <!-- Tab links -->
            <div class="tab">
                <button class="tablinks" id ="button_tabs_featured">Featured</button>
                <button class="tablinks" id ="button_tabs_upload" >Upload</button>
                <button class="tablinks" id ="button_tabs_download">Download</button>
                <button class="tablinks" id ="button_tabs_served">Served Apps</button>
                <button class="tablinks" style="display:none" id ="button_tabs_dev">Dev</button>
            </div>
    
            <!-- Tab content -->
            <div id="tab_featured" class="tabcontent">
                <h3>Featured Apps</h3>
                <p>Here are sample apps you can download.</p>
                <p>Press to Install:</p>
                <ul>
                    <li class ="feature_app" id="button_feature_com.salmanff.notery">Notery: A note taking app</li>
                    <li class ="feature_app" id="button_feature_cards.hiper.freezr">Hiper Cards: Companion app to the <a href="https://chromewebstore.google.com/detail/hipercards-bookmarker-hig/peoooghegmfpgpafglhhibeeeeggmfhb">hiper cards browser extension</a>.</li>
                    <li class ="feature_app" id="button_feature_com.salmanff.poster">Poster: A simple blogging app</li>
                </ul>
                <p><i>One day, freezr (or CEPS) will have an app store and make this look much less stale.</i></p>
            </div>
    
            <div id="tab_upload" class="tabcontent">
                <h3>Upload a New App</h3>
                <div style="display: flex; justify-content: center; margin-bottom: 1rem;">
                    <div class="drop-area" id="upload_area">
                        Drop files here to upload
                    </div>
                </div>
                <div class="file-chooser-wrapper">
                    <div class="freezrButt" id="button_chooseFile">Choose a file</div>
                    <input id="app_zipfile2" type="file" accept=".zip" style="display:none" name="app_zipfile2"/>
                    <span class="file-chooser-name" id="chosen_file_name"></span>
                    <div id="button_uploadZipFileApp" class="freezrButt" style="display:none">Upload</div>
                </div>
            </div>
    
            <div id="tab_download" class="tabcontent">
                <div id="tabDownloadInner">
                    <h3>Download an app from another web site</h3>
                    <p>Enter the url where the app zip file resides</p>
                    <div id="addUrlTable">
                        <span class="texttop">Enter URL:</span>
                        <div id="appUrl" class="input" contenteditable="true">https://github.com/user/repo</div>
                        <span class="texttop">App Name:</span>
                        <div id="appNameFromUrl" class="input" contentEditable="true"></div>
                        <div class="button-row">
                            <div id="button_addAppViaUrl" class="freezrButt">Download & Install</div>
                        </div>
                    </div>
                </div>
                <div id="installingAppViaUrl" style="display:none; text-align: center;">
                    <h2>Installing <span id="installingAppViaUrlAppName"></span></h2>
                    <img src="/app/info.freezr.public/public/static/ajaxloaderBig.gif" alt=""/>
                </div>
            </div>
    
            <div id="tab_served" class="tabcontent">
                <h3>Run an app that is served from another server or account</h3>
                <p>This is used for apps running on other servers, where you can authenticate yourself, and/or allow them to store your data on this freezr.</p>
                <div id="addServedApp">
                    <span class="texttop">App URL:</span>
                    <div id="appUrlForServedApp" class="input" contenteditable="true"></div>
                    <span class="texttop">App Name:</span>
                    <div id="appNameForServedApp" class="input" contenteditable="true"></div>
                    <span class="texttop">Display Name:</span>
                    <div id="appDisplayNameForServedApp" class="input" contenteditable="true"></div>
                    <div class="button-row">
                        <div id="button_addServedApp" class="freezrButt">Add Served App</div>
                    </div>
                </div>
            </div>
    
            <div id="tab_dev" style="display:none" class="tabcontent">
                <h3>Developer Options</h3>
                <div>Add an existing folder to Apps list. Enter app name here if the app folder already exists.</div>
                <div class="input"  id="appNameFromFolder" contenteditable="true"></div>
                <div class="fBoxGrid">
                    <div id="button_updateAppFromFiles" class="freezrButt">Add</div>
                </div>
            </div>
    
        </div>
    </div>
</div>
