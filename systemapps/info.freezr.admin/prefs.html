<!--
options:
            script_files = ['./info.freezr.admin/prefs.js'];
            page_title = "freezr.info - Main Preferences";
            css_files = './info.freezr.public/freezr_style.css';
            initial_query_func = get_main_prefs
            break;
-->
<div class="freezer_texture_outer">
  <div class="freezer_texture_inner">
    <div class="freezer_top_app_menu" id="adminFunctions">
      <a href="/account/home">Home</a>
      &nbsp;
      <a href="/account/settings">Account Settings</a>
      &nbsp;
      <a href="/admin/list_users">List All Users</a>
      &nbsp;
      <a href="/account/logout">Log Out</a>
    </div>

    <div class="freezer_dialogueTitle changeNormal">Freezr.info - Main Preferences</div>
    <div class="freezer_dialogueTitle setup">Congratulations - you have set up freezr</div>
    <div class="freezer_dialogueTitle setup">Confirm your set up parameters and preferences for your server</div>

    <form name="changePrefs" id="changePrefs">
      <div id="errorBox" class="errorBox"></div>
      <dl>

        <dt><h3>Logging:</h3></dt>
        <dt><input type="checkbox" name="logVisits" id="logVisitsId" value="logVisits" {{#log_visits}}checked{{/log_visits}}>Keep log of user visits to your server. (These can be found <a href="/admin/visits">here</a>.)</dt>

        <br>

        <dt><h3>Public Landing Page:</h3></dt>
        <dt><input type="checkbox" name="redirectPublic" id="redirectPublicId" value="redirectPublic" {{#redirect_public}}checked{{/redirect_public}}>Redirect non-logged-in visitors to a publicly accessible landing page</dt>

        <dt class="marginLeft">Enter a default public url:</dt>
        <dd><input size="30" id="defaultLandingUrl" name="defaultLandingUrl" {{#public_landing_page}}value="{{public_landing_page}}"{{/public_landing_page}}/></dd>

        <span style="display:none" >
          <dt >&nbsp; &nbsp; &nbsp; Specific app public page for you (optional):</dt>
          <span style="display:none" id="oldChoice">{{ public_landing_app }}</span>
          <dd>
            <select id="defaultPublicAppId" style="display:none"> <option value=" ">Default Page</option> </select>
          <br>
          </dd>
        </span>

        <br>
        <dt><h3>Other users on your server:</h3></dt>
        <dt><input type="checkbox" name="allowSelfReg" id="allowSelfRegId" value="allowSelfReg" {{#allowSelfReg}}checked{{/allowSelfReg}}>Allow ANYONE to create an account on this server on a self-serve basis? (You can always add specific users to your server)</dt>
        <div id="selfRegOptionsArea" style="display:none">
          <dt><input type="checkbox" name="allowAccessToSysFsDb" id="allowAccessToSysFsDbId" value="allowAccessToSysFsDb" {{#allowAccessToSysFsDb}}checked{{/allowAccessToSysFsDb}}>Allow other users of this server to use your file system and database to store their data.</dt>
          <dt class="marginLeft">Default Limit in MBs for each user:</dt>
          <dd><input size="30" id="selfRegDefaultMBStorageLimit" name="selfRegDefaultMBStorageLimit" {{#selfRegDefaultMBStorageLimit}}value="{{selfRegDefaultMBStorageLimit}}"{{/selfRegDefaultMBStorageLimit}}/></dd>
         <br>
        </div>
        <div id="mongoArea">
          <br>
          <div id="mongotextArea"></div>
          <!-- These are now hidden as they can no longer be changed by the user here - they can only be set with process.env variables -->
          <dt style="display:none"><input type="checkbox" name="useUserIdsAsDbName" id="useUserIdsAsDbNameId" value="useUserIdsAsDbName" {{#useUserIdsAsDbName}}checked{{/useUserIdsAsDbName}}>Store each user's collections under a database with their name. (Mongo Only / Incompatible with unified collections)</dt>
          <dt style="display:none"><input type="checkbox" name="useUnifiedCollection" id="useUnifiedCollectionId" value="useUnifiedCollection" {{#useUnifiedCollection}}checked{{/useUnifiedCollection}}>Use one unified collection for all user data ? (Mongo Only - this can help if you expect lots of users to register on your server.)</dt>
        </div>
        <br>

        <div>
          <br>
          <dt class="changeNormal">re-enter admin User Name</dt>
          <dd class="changeNormal"><input type="text" size="30" id="user_id_dummy" name="user_id_dummy"/></dd>
          <dt class="changeNormal">Re-enter Password:</dt>
          <dd class="changeNormal"><input type="password" size="30" id="password" name="password"/></dd>
        </div>

        <br>
        <br>

        <dd style="text-align: center"><input id="submitButt" class="freezer_dialogue_topTitle" style="padding-left: 60px; padding-bottom: 10px; cursor: pointer;" type="submit" value="Update Preferences"/></dd>
      </dl>
    </form>

    <br>

  </div>
</div>
